{% load i18n %}


<div class="row modal-head m-0">
    <div class="col-11"><i class="fas fa-route white"></i>&nbsp; {% trans 'Nueva Ruta' %} </div>
    <div class="col-1">
        <div class="d-flex justify-content-end"><button type="button" class="btn btn-lg" data-bs-dismiss="modal" 
            title="{% trans "Close" %}"> <i class="fas fa-times"></i></button> </div>
    </div>
</div>

<div id="div-notification"></div>

<div class="row justify-center">
    <div class="col-4">
        <div class="greybox-sm p-1">
            {% trans "C贸digo" %}
            <input type="text" class="form-control autosave" id="code" name="code" value="{{obj.code|default:""}}" 
                title="{{obj.code}}" data-model-name="gestion.route" data-obj-id="{{obj.id}}" data-url="{%url "autosave_field"%}" 
                data-target="div-notification" placeholder="C贸digo..." /> <span id="code__msg"></span>
        </div>
    </div>
    <div class="col-4">
        <div class="greybox-sm p-1">
            {% trans "Peso" %}
            <input type="text" class="form-control autosave" id="weight" name="weight" value="{{obj.weight|default:""}}" 
                title="{{obj.weight}}" data-model-name="gestion.route" data-obj-id="{{obj.id}}" data-url="{%url "autosave_field"%}" 
                data-target="div-notification" placeholder="Peso..." /> <span id="weight__msg"></span>
        </div>
    </div>
    <div class="col-4">
        <div class="greybox-sm p-1">
            {% trans "Finalizada" %}
            <input type="checkbox" class="form-control- autosave" id="finish" name="finish" value="{{obj.finish|default:""}}" 
                data-model-name="gestion.route" data-obj-id="{{obj.id}}" data-url="{%url "autosave_field"%}" data-bool="True"
                data-target="div-notification"/> <span id="finish__msg"></span>
        </div>
    </div>

    <div class="col-4">
        <div class="greybox-sm p-1">
            {% trans "Origen" %}
            <select class="form-control ark_change" id="source" name="source" data-url="{%url "operation-routes-source-save"%}"
                data-obj_id="{{obj.id}}" data-target="div-waste-form">
                <option value="">{% trans "-- Seleccione un origen --" %}</option>
                {% for fac in fac_list %}
                    <option value="{{fac.id}}" {%if fac == obj.source%}selected{%endif%}>{{fac.description}}</option>
                {% endfor %}
            </select>
        </div>
    </div>
    <div class="col-4">
        <div class="greybox-sm p-1">
            {% trans "Destino" %}
            <select class="form-control autosave" id="target" name="target" data-model-name="gestion.route" data-obj-id="{{obj.id}}" 
                data-url="{%url "autosave_field"%}" data-target="div-notification">
                <option value="">{% trans "-- Seleccione una destino" %}</option>
                {% for fac in fac_list %}
                    <option value="{{fac.id}}" {%if fac == obj.target%}selected{%endif%}>{{fac.description}}</option>
                {% endfor %}
            </select>
        </div>
    </div>
    <div class="col-4">
        <div class="greybox-sm p-1">
            {% trans "Residuo" %}
            <div id="div-waste-form">{% include "operations/routes/routes-form-waste.html" %}</div>
        </div>
    </div>

    <div class="col-4">
        <div class="greybox-sm p-1">
            {% trans "Cami贸n" %}
            <select class="form-control autosave" id="truck" name="truck" data-model-name="gestion.route" data-obj-id="{{obj.id}}" 
                data-url="{%url "autosave_field"%}" data-target="div-notification">
                <option value="">{% trans "-- Seleccione un cami贸n --" %}</option>
                {% for truck in truck_list %}
                    <option value="{{truck.id}}" {%if truck == obj.truck%}selected{%endif%}>{{truck.number_plate}}</option>
                {% endfor %}
            </select>
        </div>
    </div>
    <div class="col-4">
        <div class="greybox-sm p-1">
            {% trans "Conductor" %}
            <select class="form-control autosave" id="driver" name="driver" data-model-name="gestion.route" data-obj-id="{{obj.id}}" 
                data-url="{%url "autosave_field"%}" data-target="div-notification">
                <option value="">{% trans "-- Seleccione un conductor --" %}</option>
                {% for driver in emp_list %}
                    <option value="{{driver.id}}" {%if driver == obj.driver%}selected{%endif%}>{{driver.full_name}}</option>
                {% endfor %}
            </select>
        </div>
    </div>
    <div class="col-4">
        <div class="greybox-sm p-1">
            {% trans "Bandeja" %}
            <select class="form-control autosave" id="tray" name="tray" data-model-name="gestion.route" data-obj-id="{{obj.id}}" 
                data-url="{%url "autosave_field"%}" data-target="div-notification">
                <option value="">{% trans "-- Seleccione un conductor --" %}</option>
                {% for tray in tray_list %}
                    <option value="{{tray.id}}" {%if tray == obj.tray%}selected{%endif%}>{{tray.number}}</option>
                {% endfor %}
            </select>
        </div>
    </div>

    <div class="col-12">
        <div class="greybox-sm p-1">
            {% trans "Imagen" %} <div id="div-images">{% include "operations/routes/routes-form-image.html" %}</div>
        </div>
    </div>
</div>

<div class="d-flex justify-content-end p-2">
    <button type="button" class="btn btn-primary ark" data-bs-dismiss="modal" data-url="{% url "operation-routes-list" %}"
        data-target="div-routes">{% trans "Guardar" %}</button>
    &nbsp; &nbsp;
    <button class="btn btn-danger text-white ark" data-url="{% url "operation-routes-remove" %}" data-target="div-routes" 
        data-obj_id="{{obj.id}}" data-bs-dismiss="modal" title="{% trans 'Borrar' %}" 
        data-confirm="{% trans "Are you sure to remove this element?" %}">{% trans "Eliminar"%}</i></button>
</div>


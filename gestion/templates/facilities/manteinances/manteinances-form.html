{% load i18n %}


<div class="row modal-head m-0">
    <div class="col-11"><i class="fa fa-warehouse"></i>&nbsp; {% trans 'Mantenimiento' %} </div>
    <div class="col-1">
        <div class="d-flex justify-content-end"> <button type="button" class="btn btn-lg" data-bs-dismiss="modal" 
            title="{% trans "Close" %}"> <i class="fas fa-times"></i></button> </div>
    </div>
</div>

<div id="div-notification"></div>

<div class="row justify-center">
    <div class="col-6 mt-1">
        <div class="greybox-sm p-1">
            {% trans "Fecha" %}
            <input type="date" class="form-control autosave" id="date" name="date" value="{{obj.date|date:"Y-m-d"}}" 
                data-model-name="gestion.facilitymanteinance" data-obj-id="{{obj.id}}" data-url="{%url "autosave_field"%}" 
                data-target="div-notification" /> <span id="date__msg"></span>
        </div>
    </div>
    <div class="col-6 mt-1">
        <div class="greybox-sm p-1">
            {% trans "Fecha de fin" %}
            <input type="date" class="form-control autosave" id="end_date" name="end_date" value="{{obj.end_date|date:"Y-m-d"}}" 
                data-model-name="gestion.facilitymanteinance" data-obj-id="{{obj.id}}" data-url="{%url "autosave_field"%}" 
                data-target="div-notification" /> <span id="end_date__msg"></span>
        </div>
    </div>
    <div class="col-6 mt-1">
        <div class="greybox-sm p-1">
            {% trans "Concepto" %}
            <select class="form-control autosave" id="concept" name="concept" data-model-name="gestion.facilitymanteinance" 
                data-obj-id="{{obj.id}}" data-url="{%url "autosave_field"%}" data-target="div-notification"> 
                <option value="">{% trans "-- Seleccione un concepto --" %}</option>
                {% for con in concept_list %}
                    <option value="{{con.id}}" {%if con == obj.concept%}selected{%endif%}>{{con.name}}</option>
                {% endfor %}
            </select>
            <span id="concept__msg"></span>
        </div>
    </div>
    <div class="col-6 mt-1">
        <div class="greybox-sm p-1">
            {% trans "Estado" %}
            <select class="form-control autosave" id="status" name="status" data-model-name="gestion.facilitymanteinance" 
                data-obj-id="{{obj.id}}" data-url="{%url "autosave_field"%}" data-target="div-notification"> 
                <option value="">{% trans "-- Seleccione un estado --" %}</option>
                {% for st in status_list %}
                    <option value="{{st.id}}" {%if st == obj.status%}selected{%endif%}>{{st.name}}</option>
                {% endfor %}
            </select>
            <span id="status__msg"></span>
        </div>
    </div>
    <div class="col-12 mt-3">
        <div class="greybox-sm p-1">
            {% trans "Observaciones" %}
            <input type="text" class="form-control autosave" id="observations" name="observations" 
                value="{{obj.observations|default:""}}" data-model-name="gestion.facilitymanteinance" data-obj-id="{{obj.id}}" 
                data-url="{%url "autosave_field"%}" data-target="div-notification" placeholder="Observaciones..." /> 
            <span id="observations__msg"></span>
        </div>
    </div>
    <div class="col-12 mt-3">
        <label for ="file" class="btn btn-sm new">
            <i class="fas fa-upload"></i><span class="d-none d-sm-block">{%trans "Elegir"%}&nbsp;{%trans "Archivo"%}</span></label>
        <input type="file" class="multiupload d-none" name="file" id="file" data-url="{%url 'facilities-manteinances-upload'%}"
            data-target="div-images" data-obj-id="{{obj.id}}" data-csrf-token="{{ csrf_token }}" multiple/>
    </div>
    <div class="col-12 mt-3" id="div-images">{% include "facilities/manteinances/manteinances-images.html" %}</div>
</div>

<div class="d-flex justify-content-end p-2">
    <button type="button" class="btn btn-primary ark" data-bs-dismiss="modal" data-url="{% url "facilities-manteinances-list" %}"
        data-target="fac-list" data-obj_id="{{obj.facility.id}}">{% trans "Guardar" %}</button>
</div>

